{"version":3,"sources":["../src/app.js"],"names":["app","Koa","router","Router","use","__dirname","post","ctx","next","params","request","body","db","find","data","insertMany","insertData","result","ok","console","log","routes","allowedMethods","listen"],"mappings":";;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;AACA,IAAIA,GAAG,GAAG,IAAIC,eAAJ,EAAV;AACA,IAAMC,MAAM,GAAG,IAAIC,qBAAJ,EAAf,C,CAEA;;AACAH,GAAG,CAACI,GAAJ,CAAQ,2BAAa,mBAAQC,SAAR,EAAmB,WAAnB,CAAb,CAAR;AACAL,GAAG,CAACI,GAAJ,CAAQ,gCAAR,E,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AACAF,MAAM,CAACI,IAAP,CAAY,SAAZ;AAAA,2FAAuB,iBAAOC,GAAP,EAAYC,IAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AACfC,YAAAA,MADe,GACNF,GAAG,CAACG,OAAJ,CAAYC,IADN;AAAA;AAAA,mBAEFC,iBAAGC,IAAH,CAAQ,QAAR,EAAkB,CACnC;AADmC,aAAlB,CAFE;;AAAA;AAEfC,YAAAA,IAFe;AAAA;AAAA,mBAKIF,iBAAGG,UAAH,CAAc,QAAd,EAAwB,CAAC;AAChD,0BAAY;AADoC,aAAD,EAE9C;AACD,0BAAY;AADX,aAF8C,CAAxB,CALJ;;AAAA;AAKfC,YAAAA,UALe;;AAUrB,gBAAIA,UAAU,CAACC,MAAX,CAAkBC,EAAtB,EAA0B;AACxBC,cAAAA,OAAO,CAACC,GAAR,CAAYJ,UAAZ;AACD;;AACDT,YAAAA,GAAG,CAACI,IAAJ,GAAWF,MAAX;;AAbqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA;AAAA;AAAA;AAAA;AAeAT,GAAG,CAACI,GAAJ,CAAQF,MAAM,CAACmB,MAAP,EAAR,EAAyBjB,GAAzB,CAA6BF,MAAM,CAACoB,cAAP,EAA7B;AACAtB,GAAG,CAACuB,MAAJ,CAAW,IAAX","sourcesContent":["import Koa from \"koa\";\r\nimport Router from \"koa-router\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport staticServer from \"koa-static\";\r\nimport {\r\n  resolve\r\n} from \"path\";\r\nimport bodyParser from \"koa-bodyparser\";\r\nimport db from \"./module/mong\"\r\nlet app = new Koa();\r\nconst router = new Router();\r\n\r\n// 中间件\r\napp.use(staticServer(resolve(__dirname, \"../static\")));\r\napp.use(bodyParser());\r\n// app.use(async (ctx, next) => {\r\n//     console.log(`这是第一个中间件，执行顺序${1}`)\r\n//     next()\r\n//     console.log(`匹配完成之后第一个中间件逻辑，执行顺序${3}`)\r\n// })\r\n// app.use(async (ctx, next) => {\r\n//     console.log(`这是第二个中间件, 执行顺序${4}`)\r\n//     next()\r\n//     console.log(`匹配完成之后第二个中间件，执行顺序${5}`)\r\n// })\r\n\r\n// 注册路由\r\n// router.get('/news', (ctx, next) => {\r\n//   console.log(`匹配路由，执行顺序${2}`)\r\n//   ctx.body = \"这是一个新闻页面\"\r\n// })\r\nrouter.post(\"/regist\", async (ctx, next) => {\r\n  const params = ctx.request.body;\r\n  const data = await db.find(\"person\", {\r\n    //\"username\": params.username\r\n  })\r\n  const insertData = await db.insertMany(\"person\", [{\r\n    \"username\": \"dy1\"\r\n  }, {\r\n    \"username\": \"dy2\"\r\n  }])\r\n  if (insertData.result.ok) {\r\n    console.log(insertData)\r\n  }\r\n  ctx.body = params;\r\n});\r\napp.use(router.routes()).use(router.allowedMethods());\r\napp.listen(3000);"],"file":"app.js"}